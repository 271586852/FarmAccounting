# 农场记账小程序

一个基于微信小程序的农场记账系统，用于记录农产品的销售情况。

## 功能特性

### 1. 记账页面
- 显示当前日期（默认为今天）
- 支持选择其他日期查看历史记录
- 展示该日期的所有记账数据
- 支持删除单条记录（带确认提示）

### 2. 添加账单页面
- **种类选择**：沙糖桔、贡柑、茶油、蜜桔、其他（必填）
  - 选择"其他"时，需要手动输入种类名称
- **数量输入**：支持 +/- 按钮或直接输入（必填，>=0）
  - 单位选择：箱/筐/袋
- **重量输入**：支持 +/- 按钮或直接输入（可选）
  - 单位：市斤
- **邮费输入**：直接输入（可选）
  - 单位：元
- 表单验证：种类和数量为必填项

### 3. 统计页面
- **管理员登录**：需要输入账号密码才能查看统计
  - 默认账号：`admin`
  - 默认密码：`admin123`
- **日期选择**：可选择任意日期查看该日的统计
- **统计信息**：
  - 总数量
  - 总重量（市斤）
  - 总邮费（元）
  - 按种类统计（记录数、数量、重量）
  - 详细记录列表

## 技术栈

- 微信小程序原生框架
- 微信云开发（云数据库）
- WeUI 组件库

## 项目结构

```
miniprogram/
├── pages/
│   ├── record/          # 记账页面
│   ├── add/              # 添加账单页面
│   └── statistics/       # 统计页面
├── util/
│   ├── db.js            # 数据库工具类
│   └── date.js          # 日期工具函数
└── app.json             # 小程序配置
```

## 使用说明

### 1. 环境准备

1. 安装微信开发者工具
2. 确保已开通微信云开发服务
3. 在 `miniprogram/config.js` 中配置云开发环境 ID

### 2. 数据库设置

在微信云开发控制台中创建数据库集合 `records`，字段结构：

```javascript
{
  _id: String,           // 自动生成
  date: String,          // 日期，格式：YYYY-MM-DD
  type: String,          // 种类
  quantity: Number,      // 数量
  unit: String,          // 单位（箱/筐/袋）
  weight: Number,        // 重量（市斤），可选
  postage: Number,       // 邮费（元），可选
  createTime: Date,      // 创建时间
  updateTime: Date       // 更新时间
}
```

### 3. 运行项目

1. 使用微信开发者工具打开项目
2. 在 `miniprogram/config.js` 中配置正确的云开发环境 ID
3. 编译运行

## 注意事项

1. **云数据库权限**：确保云数据库集合 `records` 的权限设置为"仅创建者可读写"或根据需求调整
2. **管理员账号**：默认管理员账号密码在 `miniprogram/pages/statistics/statistics.js` 中，生产环境建议改为从云数据库读取
3. **日期格式**：所有日期使用 `YYYY-MM-DD` 格式存储

## 开发计划

- [ ] 添加数据导出功能
- [ ] 支持多日期范围统计
- [ ] 添加图表展示
- [ ] 优化管理员登录（使用云函数验证）
- [ ] 添加数据备份功能

## 许可证

MIT License
